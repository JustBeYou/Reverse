The variable `n` in function `verify_idx` is not initialized. Also, there is an arbitrary stack write in function foo on line 30.
This function call `fgets(buf + n, 16, stdin)` allows us to write 16 bytes anywhere as there are no bound checks for n. Our scope is to make `strncmp(buf, str, strlen(buf + n)) == 0` to return true. `strncmp(any, any, 0)` will always return 0, so we need to make `buf n` point to a zero length string. In order to do this we could use the arbitrary write to overwrite the uninitialized `n` variable with `-1`. The offset from the input buffer to it is `-2148`. 
